dual_tx=0;
oarf_config(0,1,dual_tx);

s = zeros(76800,2);

select = 4;

switch(select)

case 1
s(:,1) = 80 * exp(sqrt(-1)*.5*pi*(0:((76800)-1)));
s(:,2) = 80 * exp(sqrt(-1)*.5*pi*(0:((76800)-1)));

case 2
s(38400+128,1)= 80-1j*40;
s(38400+129,1)= 80+1j*40;

case 3
s(38401:(38400+640),1)=floor(linspace(-127,128,640))+1j*floor(linspace(128,-127,640));

case 4
pss0_f0=[0,0,0,0,0,0,0,0,0,0,32767,0,-26120,-19785,11971,-30502,-24020,-22288,32117,6492,31311,9658,-16384,-28378,25100,-21063,-7292,-31946,20429,25618,14948,29158,11971,-30502,31311,9658,25100,-21063,-16384,28377,-24020,22287,32117,6492,-7292,31945,20429,25618,-26120,-19785,-16384,-28378,-16384,28377,-26120,-19785,-32402,4883,31311,-9659,32117,6492,-7292,-31946,32767,-1,25100,-21063,-24020,22287,-32402,4883,-32402,4883,-24020,22287,25100,-21063,32767,-1,-7292,-31946,32117,6492,31311,-9659,-32402,4883,-26120,-19785,-16384,28377,-16384,-28378,-26120,-19785,20429,25618,-7292,31945,32117,6492,-24020,22287,-16384,28377,25100,-21063,31311,9658,11971,-30502,14948,29158,20429,25618,-7292,-31946,25100,-21063,-16384,-28378,31311,9658,32117,6492,-24020,-22288,11971,-30502,-26120,-19785,32767,0,0,0,0,0,0,0,0,0,0,0];

pss0_f = pss0_f0(1:2:length(pss0_f0)) + sqrt(-1)*pss0_f0(2:2:length(pss0_f0));

pss0_f = [0 pss0_f(37:72) zeros(1,512-73) pss0_f(1:36)];
pss0_t = ifft(pss0_f);
pss0_t = [pss0_t((512-127):512) pss0_t];
pss0_t = [pss0_t zeros(1,512+36) pss0_t]; 
pss0_max = max(max(abs(real(pss0_t))),max(abs(imag(pss0_t))));

pss0_t_fp_re = floor(real(128*pss0_t/pss0_max)); 
pss0_t_fp_im = floor(imag(128*pss0_t/pss0_max)); 

s(38400+(1:length(pss0_t_fp_re)),1) = pss0_t_fp_re + sqrt(-1)*pss0_t_fp_im;
s(38400+(1:length(pss0_t_fp_re)),2) = pss0_t_fp_re + sqrt(-1)*pss0_t_fp_im;
otherwise 
error('unknown case')
endswitch

oarf_set_tx_gain(110,110,110,110);
oarf_send_frame(0,s);

figure(1)
hold off
plot(real(s(38401:38400+640)),'r')
hold on
plot(imag(s(38401:38400+640)),'b')
